<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>3-D Tic-Tac-Toe â€” AItari 2600</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&family=JetBrains+Mono:wght@400;600;700&display=swap');
    html,body{height:100%;margin:0;background:#0B0E14;color:#E6E6EB;font-family:'JetBrains Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;}
    body{-webkit-user-select:none;user-select:none;-webkit-touch-callout:none}

    .wrap{max-width:980px;margin:0 auto;padding:18px 16px;display:grid;gap:12px}
    .top{display:flex;justify-content:space-between;gap:12px;align-items:flex-start}
    h1{margin:0;font-size:20px;font-family:'Press Start 2P', ui-monospace, monospace;letter-spacing:0.08em;text-transform:uppercase;line-height:1.25}
    p{margin:6px 0 0;color:#9AA0B4;line-height:1.5}
    .card{border:2px solid rgba(0,245,212,0.18);background:linear-gradient(180deg, rgba(20,24,38,0.78), rgba(11,14,20,0.55));border-radius:8px;padding:12px 14px;box-shadow:0 18px 45px rgba(0,0,0,0.55)}

    .stage{position:relative;border:2px solid rgba(0,245,212,0.18);border-radius:8px;overflow:hidden;height:560px;background:radial-gradient(900px 600px at 30% 20%, rgba(0,245,212,.10), rgba(0,0,0,0));touch-action:none}

    body.embed .wrap{max-width:none;padding:0;gap:0}
    body.embed .top{display:none}
    body.embed .stage{height:100dvh;border-radius:0;border:none;background:#000}
    body.embed .hint{display:none}
    body.embed #start{display:none}
    body.embed .mctrl .label{display:none}
    body.embed #hud{display:none}
    body.embed .fs-btn{display:none}

    canvas{position:absolute;inset:0;width:100%;height:100%;image-rendering:pixelated;image-rendering:crisp-edges}

    .fs-btn{position:absolute;top:8px;right:8px;z-index:10;
      background:rgba(0,0,0,0.25);border:1px solid rgba(255,255,255,0.18);color:#e8eeff;
      border-radius:8px;padding:6px 8px;font-size:16px;cursor:pointer;backdrop-filter:blur(6px);
      line-height:1;pointer-events:auto}
    .fs-btn:active{transform:translateY(1px);opacity:0.85}

    .mctrl{position:absolute;inset:0;display:none;pointer-events:none}
    .mctrl .btn{pointer-events:auto;user-select:none;-webkit-user-select:none;touch-action:none;
      background:rgba(0,0,0,0.25);border:1px solid rgba(255,255,255,0.18);color:#e8eeff;
      border-radius:14px;padding:14px 16px;font-weight:800;backdrop-filter:blur(6px)}
    .mctrl .actions{position:absolute;right:calc(12px + env(safe-area-inset-right));bottom:calc(12px + env(safe-area-inset-bottom));display:grid;gap:10px}
    .mctrl .layers{position:absolute;left:calc(12px + env(safe-area-inset-left));bottom:calc(12px + env(safe-area-inset-bottom));display:grid;gap:10px}
    .mctrl .btn:active{transform:translateY(1px);opacity:0.95}
    .mctrl .label{position:absolute;left:12px;top:12px;font-size:12px;opacity:0.75;
      background:rgba(0,0,0,0.18);border:1px solid rgba(255,255,255,0.12);border-radius:999px;padding:6px 10px}

    @media (pointer:coarse), (max-width: 760px){
      .mctrl{display:block}
    }

    .hud{min-width:210px;display:grid;gap:8px}
    .row{display:flex;justify-content:space-between;gap:10px;font-size:13px;opacity:.85}
    .row b{opacity:1}
    .hint{white-space:pre-line;font-size:12px;opacity:.85}
    button{background:rgba(11,14,20,0.7);border:2px solid rgba(0,245,212,0.40);color:#E6E6EB;padding:10px 12px;border-radius:8px;cursor:pointer;font-weight:800}

    body.fullscreen .wrap{max-width:none;padding:0;gap:0;position:fixed;inset:0;z-index:9999;background:#000}
    body.fullscreen .top{display:none}
    body.fullscreen .stage{height:100dvh;width:100vw;border-radius:0;border:none;background:#000}
    body.fullscreen .hint{display:none}
    body.fullscreen #start{display:none}
    body.fullscreen #hud{display:none}
    body.fullscreen .mctrl .label{display:none}
    body.fullscreen .fs-btn{display:block;top:calc(8px + env(safe-area-inset-top));right:calc(8px + env(safe-area-inset-right))}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <div>
        <h1>3-D Tic-Tac-Toe</h1>
        <p>4Ã—4Ã—4 grid. Get 4 in a row â€” any direction.</p>
      </div>
      <div class="card hud" id="hud">
        <div class="row"><span>Wins</span><b id="wins">0</b></div>
        <div class="row"><span>Losses</span><b id="losses">0</b></div>
        <div class="row"><span>Status</span><b id="status">Press Start</b></div>
        <div class="hint">Click/tap a cell to place X.
4 layers shown side by side.
Get 4 in a row to win!</div>
        <button id="start">Start</button>
        <button id="mute" style="font-size:11px;padding:6px 10px">ðŸ”Š Sound</button>
      </div>
    </div>

    <div class="stage">
      <canvas id="c"></canvas>
      <button class="fs-btn" id="fsBtn" aria-label="Fullscreen">â›¶</button>

      <div class="mctrl" id="mctrl">
        <div class="label">Touch controls</div>
        <div class="actions">
          <button class="btn" id="mobStart" aria-label="Start">Start</button>
          <button class="btn" id="mobMute" aria-label="Mute toggle">ðŸ”Š</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    try {
      const q = new URLSearchParams(location.search);
      if (q.get('embed') === '1') document.body.classList.add('embed');
    } catch {}
  </script>
  <script src="game.js"></script>
</body>
</html>
